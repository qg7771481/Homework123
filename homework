async def fetch_users():
    async with aiohttp.ClientSession() as session:
        async with session.get("https://jsonplaceholder.typicode.com/users") as resp:
            return await resp.json()

async def db_connection():
    return await aiomysql.connect(
        host="localhost", user="your_user", password="your_password",
        db="your_database", port=3306, autocommit=True
    )

async def get_users():
    conn = await db_connection()
    async with conn.cursor(aiomysql.DictCursor) as cur:
        await cur.execute("SELECT * FROM users")
        users = await cur.fetchall()
    await conn.ensure_closed()
    return users

async def add_user(name, email):
    conn = await db_connection()
    async with conn.cursor() as cur:
        await cur.execute("INSERT INTO users (name, email) VALUES (%s, %s)", (name, email))
    await conn.ensure_closed()

async def delete_user(user_id):
    conn = await db_connection()
    async with conn.cursor() as cur:
        await cur.execute("DELETE FROM users WHERE id=%s", (user_id,))
    await conn.ensure_closed()

async def main():
    users = await fetch_users()
    await add_user(users[0]['name'], users[0]['email'])
    print(await get_users())
    if (db_users := await get_users()):
        await delete_user(db_users[0]['id'])
    print(await get_users())

if __name__ == "__main__":
    asyncio.run(main())
